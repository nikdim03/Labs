<br><table border="0" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td>
<table width="100%" border="0" cellpadding="0" cellspacing="0" height="55"><tbody><tr>
<td style="background-repeat: no-repeat;" background="data:image/gif;base64,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" width="30"><img style="visibility: hidden;" src="" alt="" border="0" height="0" width="30"></td>
<td style="background-repeat: repeat-x; padding: 9 0 15 0;" background="data:image/gif;base64,R0lGODlhBgA3ANX/AP////f39/f37+/39+/37+/v9+/v7+/v5+f39+f37+fv9+fv7+fv5+fn7+fn597v597n797n597n3t7e3tbn3tbe3tbW3tbW1sbO1sbGxr3Gzr3Gxr29vbW1va21va21ta2tva2ttaWttaWtrZyltQAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACYALAAAAAAGADcAQAbEQMegsTAsEgPDYEAgFJaEJRRRWDAHiEGIJAJ1PI9GZPGIZBdjxVIpYEavSKXymCAoFA0HJOKI+Pt+FwMOFQ4TCwdFBgYEBgVRTgMBV0xKkAUCTQOPSZqSUE1WTxETfhIRiwuKDHwSfUtIUQwLDqpoqhOnHBYaGxgZSgGRCo11i4xrlmtNwklubpZPjpBJnM7KUQtRltRxy9ECjAVyS0VPjUa2CX8ReR4jHh8iIhGnfmMQZREMp/a1tkaWPFkiYQKFCQiDAAA7" align="center" valign="top"><h4><b>

Л/Р № 02: «Подпрограммы, макросы и библиотеки в Assembler»

</b></h4></td><td style="background-repeat: no-repeat;" background="data:image/gif;base64,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" width="30"><img style="visibility: hidden;" src="" alt="" border="0" height="0" width="30"></td>
</tr></tbody></table></td></tr><tr><td>
<table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#f0f7f7"><tbody><tr>
<td background="data:image/gif;base64,R0lGODlhBwAdANX/AP/////3///39/f///f/9/f3//f39/f37+/39+/37+/v9+/v7+/v5+fv7+fv5+fv3ufn5+fn3t7n797n597n3t7e597e3t7e1t7W1tbn59bn3tbe59be3tbe1tbW1tbWzs7e3s7W1s7Wzs7Wxs7Ozs7OxsbW1r3Gxq21taWtraWlpZScnIyUlISMjHuMhHuEhHOEhHOEe3N7ewAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADQALAAAAAAHAB0AQAaawAkCoOJcHBKA4jURMSYDQytDgkANrs0IIhkgXJlRpILwrCYXRiWxQE06zyELdIlMComzyDEhQGIcH09RLhwidggGMCYXFBAFBi8gH1yJLRwdVgV/HBhWiS8hdVctFSQMEgECL4F8CAgnDSGDUhwlmgcyrUIEKZiaUhWCXZEaIw93Hi4TgncDMKJ2AFITJahRrCIPFAgWKW8OQQA7" width="7"><img style="visibility: hidden;" src="" alt="" border="0" height="0" width="7"></td>
<td align="left" valign="top" style="padding-top: 10px; padding-right: 10px; padding-bottom: 10px; padding-left: 10px; background-repeat: repeat;" background="data:image/gif;base64,R0lGODlhHgAaALP/AP////f39/f37+/39+/37+/v9+/v7+f39wAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAAkALAAAAAAeABoAQAS6cAwhpB3GSHpl3pVFENJYFNdYEmdKiu+owuu8rsfRdmO+uz7UYLYLBG6D4nH4Qq4+TBd0JouxCpTq6pSVITNV4wwsE7+mXiY1rVVfPRkNcxeXm4Rk+GmtL/AxclB7TYASgxdQX3ZWcEg2EyGIchwdUJRjBmEBmJqYSEqfQkZObjVWa6iMc0KObzRJeHFbsWh0i1K3MGiKh1GAvZ6+ba2Pj4J+hMfGi2tcAm13XcVnucF/PTqsMEEdTEERADs=">



<br><p align="center"><b>2.1. Подпрограммы</b></p>
<br><p align="justify">Подпрограмма - это логически выделенная часть программы, которая имеет самостоятельный смысл.
<br>
<br>Обычно подпрограммы используют в 3 случаях:
<br>
<br>1. Программа содержит многократно повторяющиеся фрагменты кода;
<br>2. Программа слишком громоздка для понимания, и ее необходимо разбить на подзадачи;
<br>3. Программу разрабатывают несколько программистов, каждый реализует свою часть подзадач.
<br>
<br>Подпрограммы бывают 2 типов:
<br>
<br>1) Функции - возвращают вычисленное значение.
<br>2) Процедуры - сами не возвращают значений, но могут производить какие-либо действия или менять значения указанных регистров/переменных/ячеек памяти/флагов.
<br>
<br>В NASM все подпрограммы процедурного типа - не возвращают никакого значения, но используют регистры и могут менять их значения.
<br>
<br><b>Пример 2.1. Использование подпрограммы:</b>
<br>
<br>;===[ Начало сегмента кода ]============================================
<br><b>MYCODE: segment .code
<br>org 100h</b> ; Обязательная директива ТОЛЬКО для COM-файлов
<br><b>START:</b> ;---[ Точка старта ]---------------------------------------------------------------------------
<br>
<br>&emsp; &emsp; <b>MOV AX, 1111h
<br>&emsp; &emsp; MOV BX, 2222h
<br>&emsp; &emsp; MOV CX, 3333h
<br>&emsp; &emsp; MOV DX, 4444h
<br>&emsp; &emsp; <span style="color: #ff0000">CALL ClearAxBxCxDx</span></b> ; Это имя метки, где начинается подпрограмма
<br>
<br>;---[ Стандартное завершение программы ]----------------------------------------
<br>&emsp; &emsp; <b>MOV AX, 4C00h
<br>&emsp; &emsp; INT 21h
<br>
<br><b>;---[ Начало подпрограммы ]-------------------------------------------------------------
<br><span style="color: #ff0000">ClearAxBxCxDx:</span></b> ; Это сама метка, на нее передается управление
<br>&emsp; &emsp; MOV AX, 0
<br>&emsp; &emsp; MOV BX, 0
<br>&emsp; &emsp; MOV CX, 0
<br>&emsp; &emsp; MOV DX, 0
<br>&emsp; &emsp; <span style="color: #ff0000">RET</span></b> ; Это команда возврата из подпрограммы
<br><b>;---[ Конец подпрограммы ]---------------------------------------------------------------</b>
<br>
<br>;===[ Начало сегмента данных ]==========================================
<br>;	...
<br>
<br>
<br><i>Если скопируете себе код из примера, Блокнот/Notepad может "ругаться" на недопустимые символы Юникода. Тогда сотрите отступы слева перед командами, и замените их на табуляции.</i>
<br>
<br>
<br>Команда <b>CALL</b> сохраняет в стек адрес возврата - на следующую за ней инструкцию (обратите внимание при трассировке - указатель вершины стека смещается) и передает управление на указанную метку.
<br>
<br>Команда <b>RET</b> считывает адрес возврата из стека и возвращается к тому месту, откуда была вызвана подпрограмма (ее вызовов может быть несколько в разных местах программы). Как и стандартное завершение у программы, команда <b>RET</b> строго обязательна у каждой подпрограммы.
<br>
<br>Если проходить трассировку по F7 - то мы будем заходить внутрь подпрограммы и выполнять все ее инструкции. Если проходить трассировку по F8 - то захода внутрь подпрограммы не будет, все ее инструкции выполнятся за одно нажатие, и мы сразу увидим результат (в регистрах).
<br>
<br>Внутри подпрограммы использовать стек нужно с осторожностью: если помещаем несколько значений в стек, то их нужно обязательно извлечь из стека до команды <b>RET</b>, иначе потеряется адрес возврата, и управление передастся в неопределенное место памяти.
<br>
<br>Все подпрограммы должны располагаться строго ниже стандартного завершения программы (<nobr><b>MOV AX, 4C00h</b></nobr> и <nobr><b>INT 21h</b></nobr>), но выше сегмента данных, в котором позднее мы будем описывать собственные переменные.
<br>
<br><b><u>Важно</u>:</b> на первое место выходит правильное именование подпрограмм, основной критерий - посторонний человек должен по названию понять, что именно данная подпрограмма делает!!!
<br>
<br>Также, чтобы подпрограммы не сливались друг с другом (начиная с этой Л/Р у нас они будут накапливаться в файле - больше не надо стирать код задач), рекомендуется проводить линии визуальных комментариев на всю строку (см. пример 2.1 - <nobr><b>[ Начало подпрограммы ]</b></nobr> и <nobr><b>[ Конец подпрограммы ]</b>).</nobr>
<br>
<br>Обратите внимание: присвоение начальных значений в регистры всегда нужно делать ДО вызова подпрограммы, это существенно ускоряет проверку программы при трассировке по F8, и делает подпрограмму универсальной - теперь ее можно вызывать из разных мест программы с разными начальными значениями!
</p>


<br><p align="center"><b>2.2. Макросы</b></p>
<br><p align="justify">Макрос - фрагмент программного кода, конструируемый по заданным правилам; в отличие от подпрограммы, может содержать переменные части, передаваемые в него как параметры.
<br>
<br>Задача: В AX присвоить число. Разбить его на шестнадцатеричные цифры, каждую из которых поместить в свой полурегистр
<br>(AX = 1234h &rArr; BH = 1h, BL = 2h, CH = 3h, CL = 4h).
<br>
<br><b>Пример 2.2. Решение задачи с макросом и без:</b></p>
<br>
<table border="1" cellpadding="10">
<tr><th>Решение без макроса</th><th></th><th>Решение с макросом</th></tr>
<tr><td valign="top"><p>
<br><br><br><br><br>
<br><nobr>;===[ Начало сегмента кода ]===================</nobr>
<br><b>MYCODE: segment .code
<br>org 100h</b> ; Директива для COM-файлов
<br><b>START:</b> ;---[ Точка старта ]-------------------------------------
<br>
<br>&emsp; &emsp; <b>MOV AX, 1234h</b>	; 1234h Начальное значение
<br>
<br>&emsp; &emsp; <b>MOV <span style="color: #ff0000">BH, AH</span></b>	; 12h скопировали
<br>&emsp; &emsp; <b>AND <span style="color: #ff0000">BH, 0F0h</span></b>	; 10h после наложения маски
<br>&emsp; &emsp; <b>SHR <span style="color: #ff0000">&nbsp;BH, 4</span></b>	; 01h - 1-я цифра после сдвига
<br>
<br>&emsp; &emsp; <b>MOV <span style="color: #ff0000">BL, AH</span></b>	; 12h скопировали
<br>&emsp; &emsp; <b>AND <span style="color: #ff0000">BL, 0Fh</span></b>	; 02h - 2-я цифра
<br>
<br>&emsp; &emsp; <b>MOV <span style="color: #ff0000">CH, AL</span></b>	; 34h скопировали
<br>&emsp; &emsp; <b>AND <span style="color: #ff0000">CH, 0F0h</span></b>	; 30h после наложения маски
<br>&emsp; &emsp; <b>SHR <span style="color: #ff0000">&nbsp;CH, 4</span></b>	; 03h - 3-я цифра после сдвига
<br>
<br>&emsp; &emsp; <b>MOV <span style="color: #ff0000">CL, AL</span></b>	; 34h скопировали
<br>&emsp; &emsp; <b>AND <span style="color: #ff0000">CL, 0Fh</span></b>	; 04h - 4-я цифра
</b>
<br>
<br>;---[ Стандартное завершение программы ]-----------
<br>&emsp; &emsp; <b>MOV AX, 4C00h
<br>&emsp; &emsp; INT 21h
</p></td><th valign="middle">&rArr;</th><td valign="top">
<p><b><span style="color: #ff0000">%macro MyGetNumber 4</span></b> ; 4 параметра в макросе
<br>&emsp; &emsp; <b>MOV <span style="color: #ff0000">%1, %2</span></b> ; Копируем 2 цифры
<br>&emsp; &emsp; <b>AND <span style="color: #ff0000">%1, %3</span></b> ; Оставляем 1 цифру
<br>&emsp; &emsp; <b>SHR <span style="color: #ff0000">&nbsp;%1, %4</span></b> ; Сдвигаем на 0 или на 4
<br><b><span style="color: #ff0000">%endmacro</span></b>
<br>
<br><nobr>;===[ Начало сегмента кода ]====================</nobr>
<br><b>MYCODE: segment .code
<br>org 100h</b> ; Директива для COM-файлов
<br><b>START:</b> ;---[ Точка старта ]-------------------------------------
<br>
<br>&emsp; &emsp; <b>MOV AX, 1234h</b>	; 1234h Начальное значение
<br><b>
<br>&emsp; &emsp; <span style="color: #ff0000">MyGetNumber</span> BH,AH, 0F0h, 4
<br>&emsp; &emsp; <span style="color: #ff0000">MyGetNumber</span> BL,AH, 0Fh, 0
<br>&emsp; &emsp; <span style="color: #ff0000">MyGetNumber</span> CH,AL, 0F0h, 4
<br>&emsp; &emsp; <span style="color: #ff0000">MyGetNumber</span> CL,AL, 0Fh, 0</b>
<br>
<br>;---[ Стандартное завершение программы ]-----------
<br>&emsp; &emsp; <b>MOV AX, 4C00h
<br>&emsp; &emsp; INT 21h
</p></td></tr>
</table>

<br><p align="justify">Здесь мы заметили повторяющиеся действия для выделения каждой цифры: скопировать из полурегистра в полурегистр, наложить маску, сделать сдвиг вправо (на 4 или на 0 бит). Отличие только в именах полурегистров, в масках и в величине сдвига.
<br>
<br>В итоге мы создали макрос, в который можем передать эти различия как параметры (1-й и 2-й это имена полурегистров, 3-й это маска, 4-й это сдвиг). Из них формируются нужные блоки команд, которые вы увидите при трассировке вместо вызовов макроса!
<br>
<br><b>Комментарии:</b>
<br>
<br>Макросы позволяют основательно сократить и разгрузить основной код - они "конструируют на лету" требуемый фрагмент программы, собирая его из общей статической части и динамических вставок передаваемых параметров.
<br>
<br>Описание макроса должно располагаться до сегмента кода, при этом оно не занимает память!!!
<br>
<br>В качестве параметра в макрос можно передавать как числа, так и произвольные текстовые фрагменты, включая имена регистров и инструкций.
<br>
<br>По сути, мы создаем новую команду языка (<b>MyGetNumber</b>), которую можем использовать далее согласно описанию.
<br>
<br>Из них, в итоге, и формируются нужные блоки команд, которые вы увидите в дебаггере на местах вызовов макроса!
<br>
<br><b>Важно:</b> Если в макросе присутствуют метки, то его можно использовать лишь однократно, при повторной подстановке в программе получатся 2 и более меток с одинаковым именем и возникнет ошибка повторного описания.
<br>
<br><b>Примечание:</b> Если в качестве параметра нужно передать символ запятая, то весь содержащий ее аргумент необходимо заключить в фигурные скобки.
<br>
<br><b>MyMacro NEG, CX</b>
<br><b>MyMacro MOV, {AX, BX}</b>
<br>
<br>
<br><b>Особенности использования подпрограмм и макросов:</b>
<br>
<br>На вызов подпрограммы затрачивается некоторое время: необходимо определить адрес возврата, положить его в стек, передать управление по адресу вызываемой подпрограммы.
<br>
<br>При использовании макроса задержка на формирование кода происходит лишь на этапе компиляции, а исполняемый файл будет выполняться без дополнительных временных затрат и действий (т.е. чуть быстрее).
<br>
<br>Для облегчения понимания исходного кода пригодны оба средства, но при трассировке в дебаггере в случае подпрограмм будут видны все их вызовы и возвраты (т.е. картина почти идентична тексту программы), в то время как макросы будут заменены на сформированные блоки команд (вся программа предстанет громоздким «монолитом»).
</p>


<br><p align="center"><b>2.3. Библиотеки</b></p>
<br><p align="justify">Библиотека - набор часто используемых элементов программного кода (подпрограмм, макросов), вынесенных в отдельный файл, который легко подключить к любому проекту.
<br>
<br>Предположим, в вашей программе используется большое количество вспомогательных макросов и библиотек. Объем программного кода измеряется десятками страниц печатного текста. Разобраться в подобной "свалке" становится все труднее. Тут-то и придет на помощь механизм подключения библиотечных файлов! Он позволяет любой фрагмент кода вынести во внешний файл, который можно подключать в исходной программе одной командой:
<br>
<br><b style="color: #ff0000">%include "имя_файла_с_расширением_в_двойных_кавычках"</b>
<br>
<br>Директиву <b>%include</b> можно указать в любом месте программы. При компиляции вместо нее подставляется содержимое указанного файла. Например, можно "спрятать" описание макросов в один файл, а подпрограммы - в другой!
<br>
<br>Таким образом, становится возможным разгружать основной файл кода, делать его более понятным, создавать многофайловые проекты и библиотеки часто используемых элементов.
<br>
<br><b>Примечание:</b> На некоторых компьютерах при компиляции <b>%include</b> выдает ошибку. В этом случае ее лучше не использовать!
</p>







<br>
<br>
<br>В каждой задаче необходимо использовать макрос (присвоение начальных значений + вызов обрабатывающей их подпрограммы).
</p>


<br><br><br>
<p><b>Задать вопрос по материалам Л/Р можно на форуме «<a target="_blank" href="https://edu.stankin.ru/mod/forum/view.php?id=137697"><u>Вопросы и ответы (ПО МАТЕРИАЛАМ КУРСА)</u></a>»
<br><br>
E-mail для обратной связи:
<a target="_blank" href="mailto:Tarasov.AG@mail.ru"><u>Tarasov.AG@mail.ru</u></a>,
<a target="_blank" href="mailto:A.Tarasov@Stankin.ru"><u>A.Tarasov@Stankin.ru</u></a>
</b></p>



</td><td background="data:image/gif;base64,R0lGODlhBwAdANX/AP/////3///39/f///f/9/f3//f39/f37+/39+/37+/v9+/v7+/v5+fv7+fv5+fv3ufn5+fn3t7n797n597n3t7e597e3t7e1t7W1tbn59bn3tbe59be3tbe1tbW1tbWzs7e3s7W1s7Wzs7Wxs7Ozs7OxsbW1r3Gxq21taWtraWlpZScnIyUlISMjHuMhHuEhHOEhHOEe3N7ewAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADQALAAAAAAHAB0AQAabQMeFowIgJgzR5KUASCCkTMswmEBGGxd1EhllXIiBhHGZrDyICqMzQS0SlcgFxDJOHMpVooD8cGIQBFwiHFpVFBcmMAZHEB8gLwYFEBAdHFMITxh/EHxyIZFHDCQVU1UOfi8CAWMhDScIjSWXW6gcMgd8lRwpBKIfpZITDyMakWIMHxMuHp4XITADfAwlE1MAw4THEg5sKRYIFEEAOw==" width="7"><img style="visibility: hidden;" src="" alt="" border="0" height="0" width="7"></td>
</tr></tbody></table></td></tr><tr><td>
<table width="100%" border="0" cellpadding="0" cellspacing="0" height="20" bgcolor="#f0f7f7"><tbody><tr>
<td background="data:image/gif;base64,R0lGODlhHgAUAOb/AP/////3//f///f/9/f39/f37+///+/3/+/39+/37+/v9+/v7+/v5+fv9+fv7+fv5+fv3ufn7+fn5+fn3ufn1ufe597v797n797n597n3t7e597e3t7e1tbn59be3tbe1tbW3tbW1tbWzs7W1s7O1s7Ozs7OxsbW1sbOzsbGzsbGxr3Gzr3Gxr29xr29vbXGxrW9xrW9va21taW1taW1raWlpZytrZylpZSlpZSlnJScpZScnJSUnIycnIyUnISMjHuMjHuEhAAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEMALAAAAAAeABQAQAf/gA4CITYnHxMIiQsLiQUFiZAIi42PCB4YAjU2CB8hCgqRCQmJop+howhDqhsbAgALISouMjEkKCwlLSgkKyq3IyQstykYCBIwJxsQoAgEBKSops3PCKKJQxgOBDc4DgwbDpPVqNDi1ggOACU5KBkTognO54vw8QTzC4IhNysZH+Pn6kELCI9AuhJBUjwwkWGctEXmEjxcMARAggEEavho5UpAM48IDBDwSMBAIgIHUKZSpSrBBgwSMESwgEGBgwwaYC7AABNDPp4ZJKTbh+IDBEjiHEVSxAiBUgQREKiYcUhCwXuo6F3F52BAiB79KDBzBi2RNLLjEqXboOOFAxEbewQCRCW3ngIMAGIAwbDBhLSyDpkBtkTgwo8ZCERwCMw04sQhCxQAkLFjhIIBkhIdQIAZErVEJk2u3AkAAA0eu1CAyBahw8xwPCM4aOCApwMHLIds8LDAVWkJHhxEwPBNgoKYEsDVllABQ26WAQQQWBRuuAQNt5Fjtw4zEAA7" width="30"><img style="visibility: hidden;" border="0" height="0" width="30" src="" alt=""></td>
<td background="data:image/gif;base64,R0lGODlhHgAUANX/AP////f///f/9/f3//f39/f37+///+//9+/3/+/39+/37+/v9+/v7+f39+fv9+fv7+fv5+fn7+fn5+fn3ufe597v797n797n597n3t7e597e3tbn59be3s7W1s7O1s7OzsbO1sbOzsbGzsbGxr3Gzr3Gxr29xgAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAACgALAAAAAAeABQAQAb/wERCoRAKiQzGsWhEKodMInG5WBQK0qiies0KRaVP2EPygEqikagjapdCHdNnVOqE5OjlctrU8vVQDQ1VRn2ChIWBgwt8SVV8jQyPWkJJlU+ThZYJmUabgJuQTKGUCQIJA0IEAQQJCKkBCKiurQcDBAYDCgGoAxEXEhcRDxIOwRIaDwwXFBgXDw8XE84LEBLTEZGd2oylpHtMgF59mpjd5UKdl+BUVlhS7V3w5AnfUOv3+USHC4mKiIX2LUJwQIiBWQUTHEy4UJbCBAccFrywYZiDaNAeRNhwgQE0ihkfcPRYQeQzDcgkKLigABkEDMOcScDgkcOxBRdQPjsGbBkDEZ4RlkmQkEFZBgrCNGYIZiEIADs="><img style="visibility: hidden;" border="0" height="0" width="150" src="" alt=""></td>
<td background="data:image/gif;base64,R0lGODlhHgAUAOb/AP/////3//f///f/9/f39/f37+///+/3/+/39+/37+/v9+/v7+/v5+fv9+fv7+fv5+fv3ufn7+fn5+fn3ufn1ufe597v797n797n597n3t7e597e3t7e1tbn59be3tbe1tbW3tbW1tbWzs7W1s7O1s7Ozs7OxsbW1sbOzsbGzsbGxr3Gzr3Gxr29xr29vbXGxrW9xrW9va21taW1taW1raWlpZytrZylpZSlpZSlnJScpZScnJSUnIycnIyUnISMjHuMjHuEhAAAAMDAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEMALAAAAAAeABQAQAf/gAgIBQWChggLC4KEh4ILEx8nNiECDoIJCZcJCgqHmJqcIR8INjUCGB4pLCgsJCOrKiskKC0lqyQxMi4qIQsAAhsbQ8OagpyCBATFCMcIBBAbJzASCBjLmonXCA4bDA44NwQOGEOfiAuYmMnmiekJBBMZKDklAJYI7prm+fiYHxkrblBy0CxRtn4FDSLIYOJBiiD1HCg7QICiIAPKBBAwIEgjAgG/gPmoQWBAgmESMmDA4GABBgkrF8DUkIEgBgsRXmLYcHIYsUGFGh1kJBTCBxQC7bFDl25dpnPuCEiANEMFggjLmiXL2skZBYA9Qgy4x69sOk0bRDh4oWODvWWYdprB3aTAxAYMQGIAwMCpq0FFCP0q5CACwYwfFwh4MMSRoyFlhgYgOOAIwQAFI3bIAKBgwRAH41g2cJATwwIHODtEGAcCxSweNADs9TwEQwWYoDfAlKBAQjcMqz1IkP1rgQdhPncDd6BhN+jmwE8nIiAggM/rgQAAOw==" width="30"><img style="visibility: hidden;" border="0" height="0" width="30" src="" alt=""></td>
</tr></tbody></table></td></tr></tbody></table><br><br><br>